/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

var oCMM = require('cmm');
var oUPM = require('../upm_Interface.js');

function message(m){
    if (m.op === 'dependency')
    {
        m.ns = 'upm';

      return oCMM.dependency(m);
    }
}
var init_message = {
    'op': 'init',
     ns : '',
    'pl':{fn:message}
    };
var ms = {ns:null, pl:null};
 ms.pl = {
    userAccountID:"642d0eff3748330000dc5639", // Profile UserAccountID from User Account ID on User.ID
    lzID: "642d0eff3748330000dc5631",
    completion: 30, //percentage completed.
    basic: {
        IDCode: {value: "642d0eff3748330000dc5639", verified: true, verifiedDate:  Date.now()},
        names: {value: 'rolland', verified:true, verifiedDate: Date.now()},
        gender: {value: 'male', verified: true, verifiedDate: Date.now()},
        birthDay: {value: Date.now(), verified: false, verifiedDate: Date.now()},
        country: {value: 'Canada', verified: true, verifiedDate: Date.now()},
        nativeLoc: {value: '山西', verified: true, verifiedDate: Date.now()},
        currentLoc: {value: '上海', verified: false, verifiedDate: Date.now()}
    },
    contact: {
        email1: {value: 'addfdaf@qq.com', verified: false, verifiedDate: Date.now()},
        email2: {value: 'dfad@ad.com', verified: true, verifiedDate: Date.now()},
        tel1: {value: '12345678', verified: false, verifiedDate: Date.now()},
        tel2: {value: '92345677', verified: false, verifiedDate: Date.now()},
        qq: {value: '8988458454', verified: false, verifiedDate: Date.now()},
        weixin: {value: 'mywechat1', verified: true, verifiedDate: Date.now()}
    }
};

exports.testCreatePersonal = function(test){
   //var paramPersonalJsonInput = JSON.parse(JSON.stringify(m));
    oUPM.init(init_message).then(function(r1){
    console.log(r1);
        oUPM.createPersonalProfile(ms)
            .then(function(r2){
                console.log(r2.pl);
                test.expect(5);
                test.equals(r2.er, null);
                test.equals(ms.pl.userAccountID,r2.pl.userAccountID);
                test.equals(ms.pl.completion,r2.pl.completion);
                test.equals(ms.pl.basic.names.value,r2.pl.basic.names.value);
                test.equals(ms.pl.basic.gender.value,r2.pl.basic.gender.value);
                test.done();
            }).fail(function(r3){
                console.log(r3);
                test.done();
            });
    });
};
