/**
 * Created by LBS006 on 3/4/15.
 */




var redisClients = [];
var redisClient = null;

function getRedisDBConfig(){
    return require('./configs.json').rdconfig;
}

module.exports.getRedis  = function(paramDB){

    // initialize database connection
    var redisConfigs = getRedisDBConfig();
    if(redisConfigs.pass){
        redisClient = require('redis').createClient(redisConfigs.port, redisConfigs.host,{auth_pass: redisConfigs.pass});
    }
    else{
        redisClient = require('redis').createClient(redisConfigs.port, redisConfigs.host,{});
    }

    redisClients.push(redisClient);

    console.log('cmm: connecting to redis db for ' + paramDB);
    return redisClient;
};

process.on('SIGINT', function(){

    for (var i in redisClients){
        console.log('Closing redis connection for: ');
        redisClients[i].quit();
    }
    process.exit(0);
});

