/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

var oCMM = require('cmm');
var oDMM = require('../dmm_Interface.js');

function message(m) {
    if (m.op === 'dependency') {
        m.ns = 'dmm';

        return oCMM.dependency(m);
    }
}
var init_message = {
    'op': 'init',
    ns: '',
    'pl': {fn: message}
};


exports.test_dmm_getUserPhotos = function (test) {
    var ms = {ns: null, pl: null};
    ms.pl = {
         uID: "leo@lbs.com", // Profile UserAccountID from User Account ID on User.ID
        oID: '54d38804c503ad41b06a7f51'

    };

    oDMM.dmm_getUserPhotos(ms)
        .then(function (r2) {
            console.log('in success loop of testing.. ');
            console.log(r2);
            //test.expect(1);
            //test.equals(r2.er, null);
            test.done();
        }).fail(function (r3) {
            console.log('in fail loop....')
            console.log(r3);
            test.done();
        });
};



//exports.test_pmm_deleteStandardByCode= function (test) {
//    var m_standard = {ns: null,op:'pmm_deleteStandardByCode', pl: null};
//    m_standard.pl = {
//        sc:'Z007'
//    };
//    oPMM.pmm_deleteStandardByCode(m_standard)
//        .then(function(r2){
//            console.log(r2.pl);
//            test.expect(1);
//            test.equals(r2.er, null);
//            test.done();
//        }).
//        fail(function(r3){
//            console.log(r3);
//            test.done();
//        });
//};

exports.test_dmm_markPhotoForDelete = function (test) {
    var m= {ns: null,op:'dmm_markPhotoForDelete', pl: null};
    m.pl = {
        uID:'leo@lbs.com',
        oID:'54c1c79c4d754999038abf1c',
        _id: '54e1b02d366f2fc60f2ea638'
    };

    oDMM.dmm_markPhotoForDelete(m)
        .then(function(r2){
          console.log(r2.pl);
          test.expect(1);
          test.equals(r2.er, null);
          test.done();
        }).
        fail(function(r3){
          console.log(r3);
          test.done();
        });
};

exports.setUp = function setUp(callback) {
    console.log('\nsetting up integration testing ....');
    oCMM.init(init_message).then(function (r) {
        oDMM.init(init_message).then(function (r1) {
            console.log(r1);
            callback();
        }).fail(function (r) {
            console.log(r);
        });
    }).fail(function (r) {
        console.log(r);
    });

};

exports.tearDown = function tearDown(callback) {
    console.log("\ntearing down integration testing ...");
    callback();
};

