/* 
 * This should be part of a transaction helper module that can be installed as a
 * dependency of a module such as smm. The smm will initialize this module with
 * a mongoose and use the helper to store data for transactions as well as rollback
 * and commit
 */

module.exports = function (paramMongoose){

var TransactionSchema = new paramMongoose.Schema({
  status: String//@todo: this should be a set of values
  ,transactionid:{type:paramMongoose.Schema.Types.ObjectId,required:true}
  ,entityid:{type:String,required:true}// id of the entity to restore/remove/update not used when roll back a multiple update cannot be Objectid because sometimes a string is an id
  ,startDate:{type:Date,required:true,default:new Date()}
  ,operation:String
  ,query:Object //could be {"_id":{"$in":[val,val]}}
  ,values:String //the old value(s) (object to json string) could be: {'postal_code':'110000','service_name':'original name'} used when roll back multiple update together with query
  ,orgValue:Object
  ,collectionName:String
});

return TransactionSchema;

};