/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

var oCMM = require('cmm');
var oUPM = require('../upm_Interface.js');


function message(m){
    if (m.op === 'dependency')
    {
        m.ns = 'upm';
      return oCMM.dependency(m);
    }
}
var init_message = {
    'op': 'init',
     ns : '',
    'pl':{fn:message}
    };
var ms = {ns:null, pl:null};
// ms.pl = {
//    userAccountID:"54c1c79c4d754999038abf1b", // Profile UserAccountID from User Account ID on User.ID
//    lzID: "642d0eff3748330000dc5631",
//    completion: 30, //percentage completed.
//     basic:{
//         userName: {value: 'rolland', verified:true, verifiedDate: Date.now()},
//         avatar: {value:'../../commons/images/bachend/backendProfilePic.png', verified: true, verifiedDate: Date.now()},
//         gender:{value: 'male', verified: true, verifiedDate: Date.now()},
//         dateOfBirth:{value: Date.now(), verified: true, verifiedDate: Date.now()},
//         country: {value: '中国', verified: false, verifiedDate: Date.now()},
//         placeOfBrith: {value:Date.now() ,verified: true, verifiedDate: Date.now()},
//         currentResidence: {value: '上海', verified: false, verifiedDate: Date.now()}
//     },
//
//     private: {
//         IDNumber: {value: '39473987483', verified: true, verifiedDate: Date.now()},
//         lastestPhoto:{value:"../../commons/images/Latest-photo.jpg",verified: true, verifiedDate: Date.now()},
//         fullName: {value: {type:String, default: '无'}, verified: true, verifiedDate: Date.now()},
//         lanID: {value: {type:String, default: '无'},verified: true, verifiedDate: Date.now()}
//     },
//
//     contacts: {
//         email: {value: 'hiodhafd@qq.com', verified: true, verifiedDate: Date.now()},
//         linkToPhone:{value:'7398752434', verified: true, verifiedDate: Date.now()},
//         linkToQQ:{value:'345357943', verified:false, verifiedDate: Date.now()},
//         linkToWechat:{value:'mywechat', verified: true, verifiedDate: Date.now()}
//     }
//};


ms.pl = {
    uID: '54e313c7b3edee1c08d22ba1', // Profile UserAccountID from User Account ID on User.ID
    lzID: '',
    completion: 45, //percentage completed.

    corporationName: {value: '交通大学', verified: true, verifiedDate: Date.now()},
    corporationLogo: {value: '../../commons/images/bachend/backendProfilePic.png', verified: true, verifiedDate: Date.now()},
    corporationCode: {value: 'Cssss0', verified: true, verifiedDate: Date.now()},
    corporationType: {value: '交通大学', verified: true, verifiedDate: Date.now()},
    authenticationStatus: {value: '无', verified: true, verifiedDate: Date.now()},
    officialWebSite: {value: '无', verified: true, verifiedDate: Date.now()},
    businessDepartmentWebSite: {value: '无', verified: true, verifiedDate: Date.now()},
    address: {value: '无', verified: true, verifiedDate: Date.now()},

    contacts:{
        manager:{
            name:{value: '无', verified: true, verifiedDate: Date.now()},
            phone:{value: 000000, verified: true, verifiedDate: Date.now()},
            otherContactInfos:[{value: '无', verified: true, verifiedDate: Date.now()}]
        },
        verificationManager:{
            name:{value:'无', verified: true, verifiedDate: Date.now()},
            phone:{value: 000000, verified: true, verifiedDate: Date.now()},
            otherContactInfos:[{value: '无', verified: true, verifiedDate: Date.now()}]
        }

    },

    description:{
        text: {value:'无', verified: true, verifiedDate: Date.now()},
        attachement:['../../commons/images/bachend/backendProfilePic.png']
    },

    images: ['../../commons/images/bachend/backendProfilePic.png'],
    videos: ['../../commons/images/bachend/backendProfilePic.png'],
    audios: ['../../commons/images/bachend/backendProfilePic.png']
    //frequentlyAskedQuestions:[{type:String}]

}


exports.testCreateCorporateDetails = function(test){

    oUPM.createCorporateDetailPage(ms)
        .then(function(r){
            console.log('\n', r.pl);
            test.expect(6);
            test.equals(r.er, null);
            test.equals(ms.pl.uID, r.pl.uID);
            test.equals(ms.pl.completion, r.pl.completion);
            test.equals(ms.pl.corporationName.value, r.pl.corporationName.value);
            test.equals(ms.pl.address.value, r.pl.address.value);
            test.equals(ms.pl.contacts.manager.name.value, r.pl.contacts.manager.name.value);
            test.done();
        }).fail(function(err){
            console.log(err);
            test.done();
        });
}

exports.testReadCorporateDetailPageByID = function(test){

    var m2 = {ns:null, op:null, pl:null};
    m2.pl = {
        "uID": '54e313c7b3edee1c08d22ba1'};
    // var paramPersonalJsonInput = JSON.parse(JSON.stringify(personal));
    oUPM.readCorporateDetailPageByID(m2)
        .then(function(r){
            console.log(r.pl);
            test.expect(2);
            test.equals(r.er, null);
            test.equals(m2.pl.uID,r.pl.uID);
            test.done();
        }).fail(function(r){
            console.log(r);
        });
}


//exports.testCreatePersonal = function(test){
//   //var paramPersonalJsonInput = JSON.parse(JSON.stringify(m));
//
//        oUPM.createPersonalProfile(ms)
//            .then(function(r2){
//                console.log("\n" + r2.pl);
//                test.expect(5);
//                test.equals(r2.er, null);
//                test.equals(ms.pl.userAccountID,r2.pl.userAccountID);
//                test.equals(ms.pl.completion,r2.pl.completion);
//                test.equals(ms.pl.basic.userName.value,r2.pl.basic.userName.value);
//                test.equals(ms.pl.basic.gender.value,r2.pl.basic.gender.value);
//                test.done();
//            }).fail(function(r3){
//                console.log(r3);
//                test.done();
//            });
//
//};
//
//
//exports.testReadPersonalProfileByUserID = function(test){
//    var m2 = {ns:null, op:null, pl:null};
//    m2.pl = {
//        "userAccountID": '54c1c79c4d754999038abf1c'};
//    // var paramPersonalJsonInput = JSON.parse(JSON.stringify(personal));
//    oUPM.readPersonalProfileByUserID(m2)
//        .then(function(r){
//            console.log(r.pl);
//            test.expect(2);
//            test.equals(r.er, null);
//            test.equals(m2.pl.userAccountID,r.pl.userAccountID);
//            test.done();
//        }).fail(function(r){
//           console.log(r);
//        });
//};



exports.setUp = function setUp(callback) {
    console.log('\nsetting up integration testing ....');
    oCMM.init(init_message).then(function (r) {
        oUPM.init(init_message).then(function (r1) {
            console.log(r1);
            callback();
        }).fail(function (r) {
            console.log(r);
        });
    }).fail(function (r) {
        console.log(r);
    });
};

exports.tearDown = function tearDown(callback) {
    console.log("\ntearing down integration testing ...");
    callback();
};



