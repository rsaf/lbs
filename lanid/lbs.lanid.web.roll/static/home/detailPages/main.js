/** * Created by rollandsafort on 3/19/15. */console.log('detail pages search module is loaded...');lbs.routes['/basemodule'] = {mod: 'lbs.basemodule', location: '/basemodule.js'};lbs.routes['/details:nomenu'] = {mod: 'lbs.details:nomenu', location: '/details/main.js'};lbs.routes['/home/detailPages'] = {mod: 'lbs.home.detailPages', location: '/home/detailPages/main.js'};lbs.routes['/home/detailPages/search'] = {mod: 'lbs.home.detailPages.list', location: '/home/detailPages/main.js'};lbs.modules['/home/detailPages'] = {    parent:null    ,create:function(){        var me = this;        this.routeParams = {                listEndPoint: '/details/search/multiple.json'                ,currentPage: null        };        this.parent = lbs['details:nomenu'];        lbs.home = lbs.home||{};        lbs.home.detailPages = this;        delete this.deps;        delete this.create;    }    ,deps:['/details:nomenu']    ,render : function render(arg){        var me = this;        return this.parent.render(arg);    }    ,handlers:{    }};lbs.modules['/home/detailPages/search'] = {    container : '#main_container'    ,parent:null    ,list: []    ,pageSize: 12    ,index: 0    ,mainView:'/home/detailPages/lanSearch.html'    ,create:function(){        var me = this;        this.parent =  lbs.home.detailPages;        lbs.home.detailPages.list = this;        delete this.deps;        delete this.create;    }    ,basePath:'/details'    ,deps:['/home/detailPages']    ,render: function render(arg) {        var me = this;        arg = arg||{};        var url = $.param.fragment();        var patt = new RegExp('^\/home\/detailPages\/search\/');        if(patt.test(url)){            var urlParams = url.slice(25).split('/');            var scope = urlParams[0];            var key = urlParams[1];            console.log('seaching--',scope,key);            arg.queryData =  arg.queryData||{p:me.index,ps:me.pageSize};            arg.queryData.scope = scope;            arg.queryData.key = key;            arg.listEndPoint = lbs.home.detailPages.routeParams.listEndPoint;            return this.parent.render(arg)                .then(function(){                    arg.listView = me.mainView;                    arg.container = me.container;                    lbs.basemodule['general:list'].render.call(me, arg)                        .then(function(){                                $(".detailPagesDescriptionText").dotdotdot({                                    after: "a.readmore"                                });                        });                });        }    }    ,rerender: function rerender(arg){        var me =  this;          arg = arg||{};          arg.specialPadding = true;        return lbs.basemodule['general:list'].rerender.call(this, arg)            .then(function(){                lbs.actionHandler({container:me.containerToSet,handlers:me.handlers});            });    }    ,handlers:{    }};