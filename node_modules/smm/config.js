/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

var mongooseODM = require('mongoose');
var conn = mongooseODM.connection;
 
module.exports.mongoose  = function(){
   
    if(conn.readyState === 0){     
    mongooseODM.connect('mongodb://localhost/smm');  
    return mongooseODM;
    }
    else {
         console.log('Mongoose is already connected ...');
        return mongooseODM;
    }

};

process.on('SIGINT', function(){
mongooseODM.connection.close(function(){
    console.log('Mongoose disconnected due to application termination...');
    conn = mongooseODM.connection;
    process.exit(0);
});
});

