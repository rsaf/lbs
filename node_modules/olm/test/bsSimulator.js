
var express = require('express');
var logger = require('morgan');
var session = require('express-session');
var bodyParser = require('body-parser');
var errorHandler = require('errorhandler');

var oOLM = require('../olm');

var bs = express();

// all environments
bs.set('port', process.env.PORT || 80);
bs.use(logger('dev'));
bs.use(session({ resave: true,
                  saveUninitialized: true,
                  secret: 'uwotm8' }));
bs.use(bodyParser.json());
bs.use(bodyParser.urlencoded({ extended: true }));
bs.use(oOLM.initialize());

// development only
if ('development' === bs.get('env')) {
  bs.use(errorHandler());
}

//app.get('/', routes.index);
bs.get('/home/registration', homePageFunction); 

bs.get('*', four_oh_four);

bs.listen(bs.get('port'), function(){
  console.log('Business service simulator started on port ' + bs.get('port'));
});


function four_oh_four(req, res) {
    res.writeHead(404, { "Content-Type" : "application/json" });
    res.end("\n"+ "Invalid Request" + "\n");
}

function homePageFunction(paramRequest, paramResponse){
            paramResponse.writeHead(200, { "Content-Type" : "application/json" });
            paramResponse.end("\n Home page called response ...  \n \n");
}